{"version":3,"file":"index.js","mappings":"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","sources":["webpack:///external window [\"wp\",\"element\"]","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./admin/js/gutemberg/src/index.js"],"sourcesContent":["module.exports = window[\"wp\"][\"element\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\r\n * Thingviewer Gutenberg block\r\n */\r\n\r\nconst { registerBlockType } = wp.blocks;\r\nconst { \r\n    RawHTML,\r\n    userState \r\n} = wp.element;\r\nconst { \r\n    InspectorControls,\r\n    MediaUpload\r\n} = wp.editor;\r\nconst { \r\n    PanelBody,\r\n    Button,\r\n    RangeControl,\r\n    ToggleControl\r\n} = wp.components;\r\n\r\nregisterBlockType( 'wp3d-thingviewer-lite/gutemberg-block', {\r\n    title: 'WP 3D Thingviewer Lite',\r\n    icon: 'embed-generic',\r\n    description: 'Embed a WP 3D Thingviewer into the content',\r\n    category: 'embed',\r\n    example: {},\r\n    attributes: {\r\n        model_url : {\r\n            type     : 'string',\r\n            default  : ''\r\n        },\r\n        model_url_bck : {\r\n            type     : 'string',\r\n            default  : ''\r\n        },\r\n        model_id : {\r\n            type    : 'number',\r\n            default : ''\r\n        },\r\n        model_id_bck : {\r\n            type    : 'number',\r\n            default : ''\r\n        },\r\n        model_preview : {\r\n            type     : 'string',\r\n            default  : ''\r\n        },\r\n        rotation_x : {\r\n            type    : 'number',\r\n            default : 0\r\n        },\r\n        rotation_y : {\r\n            type    : 'number',\r\n            default : 0\r\n        },\r\n        rotation_z : {\r\n            type    : 'number',\r\n            default : 0\r\n        },\r\n        link_cloaking : {\r\n            type   : 'boolean',\r\n            default: false\r\n        }\r\n    },\r\n    edit: ({ attributes, setAttributes }) => {\r\n        const {\r\n            model_url,\r\n            model_url_bck,\r\n            model_id,\r\n            model_id_bck,\r\n            model_preview,\r\n            rotation_x,\r\n            rotation_y,\r\n            rotation_z,\r\n            link_cloaking,\r\n        } = attributes;\r\n        const ALLOWED_MEDIA_TYPES = ['application/sla', 'application/octet-stream', 'application/octet-stream', 'text/plain'];\r\n\r\n        var shortcode = [\r\n            '[wp-3dtvl model_id=\"' + attributes.model_id + '\"',\r\n            'model_file=\"' + attributes.model_url + '\"',\r\n            'model_preview=\"' + attributes.model_preview + '\"',\r\n            'rotation_x=\"' + attributes.rotation_x + '\"',\r\n            'rotation_y=\"' + attributes.rotation_y + '\"',\r\n            'rotation_z=\"' + attributes.rotation_z + '\"][/wp-3dtvl]'\r\n        ].join(' ');    \r\n\r\n        function onRotationXChange(new_value) {\r\n            setAttributes({ rotation_x: new_value });\r\n        }\r\n        function onRotationYChange(new_value) {\r\n            setAttributes({ rotation_y: new_value });\r\n        }\r\n        function onRotationZChange(new_value) {\r\n            setAttributes({ rotation_z: new_value });\r\n        }\r\n        function onSelectModel(new_media) {\r\n            if ( new_media && new_media.url && new_media.id) {\r\n                setAttributes({ model_id_bck: new_media.id })\r\n                setAttributes({ model_url_bck: new_media.url })\r\n\r\n                if ({link_cloaking} == true) {\r\n                    setAttributes({ model_id: new_media.id })\r\n                    setAttributes({ model_url: '' })\r\n                } else {\r\n                    setAttributes({ model_id: '' })\r\n                    setAttributes({ model_url: new_media.url })\r\n                }\r\n            }\r\n        }\r\n        function onSelectPreview(new_media) {\r\n            if ( new_media && new_media.sizes ) {\r\n                setAttributes({ model_preview: new_media.sizes.full.url })\r\n            }\r\n        }\r\n        function onLinkCloakingSwitch(new_value) {\r\n            setAttributes({ link_cloaking: new_value })\r\n            if (new_value == true) {\r\n                if ( {model_id_bck} != '') {\r\n                    setAttributes({ model_id: model_id_bck })\r\n                    setAttributes({ model_url: '' })\r\n                }\r\n            } else {\r\n                if ( {model_url_bck} != '') {\r\n                    setAttributes({ model_id: '' })\r\n                    setAttributes({ model_url: model_url_bck })\r\n                }\r\n            }\r\n        }\r\n\r\n        return ([\r\n            <InspectorControls style={{ marginBottom: '40px' }}>\r\n                <PanelBody title={ \"Model File\" }>\r\n                    <input type=\"text\" value={model_url_bck} style={{ marginBottom: '10px' }} />\r\n                    <MediaUpload\r\n                        style={{ marginBottom: '20px', marginTop: '10px' }}\r\n                        onSelect={ onSelectModel }\r\n                        allowedTypes={ ALLOWED_MEDIA_TYPES }\r\n                        value={ model_url_bck }\r\n                        render={ ( { open } ) => (\r\n                            <Button \r\n                                onClick={ open }\r\n                                variant=\"primary\"\r\n                                >Select 3D Model</Button>\r\n                        ) }\r\n                    />,\r\n                    <ToggleControl \r\n                        style={{ marginBottom: '10px', marginTop: '10px' }}\r\n                        label={ \"Link Cloaking\" }\r\n                        help={\r\n                            link_cloaking\r\n                                ? \"The model file url is invisible and will be loaded using the Wordpress REST Api.\"\r\n                                : \"The model file url is visible.\"\r\n                        }\r\n                        checked={ link_cloaking }\r\n                        onChange={ onLinkCloakingSwitch }\r\n                    />\r\n                </PanelBody>\r\n                <PanelBody title={ 'Preview Image' }>\r\n                    <input type=\"text\" value={model_preview} style={{ marginBottom: '10px' }} />\r\n                    <MediaUpload\r\n                        style={{ marginBottom: '10px', marginTop: '10px' }}\r\n                        onSelect={ onSelectPreview }\r\n                        allowedTypes={ ['image'] }\r\n                        value={ model_preview }\r\n                        render={ ( { open } ) => (\r\n                            <Button \r\n                                onClick={ open }\r\n                                variant=\"primary\"\r\n                                >Select Preview Image</Button>\r\n                        ) }\r\n                    />\r\n                </PanelBody>\r\n                <PanelBody title={ \"Model Settings\" }>\r\n                    <RangeControl \r\n                        label={ \"Rotation X\" } \r\n                        value={ rotation_x }\r\n                        onChange={ onRotationXChange } \r\n                        min={ 0 }\r\n                        max={ 360 }\r\n                        step={ 1 }\r\n                    />\r\n                    <RangeControl \r\n                        label={ \"Rotation Y\" } \r\n                        value={ rotation_y }\r\n                        onChange={ onRotationYChange } \r\n                        min={ 0 }\r\n                        max={ 360 }\r\n                        step={ 1 }\r\n                    />\r\n                    <RangeControl \r\n                        label={ \"Rotation Z\" } \r\n                        value={ rotation_z }\r\n                        onChange={ onRotationZChange } \r\n                        min={ 0 }\r\n                        max={ 360 }\r\n                        step={ 1 }\r\n                    />\r\n                </PanelBody>\r\n            </InspectorControls>,\r\n            <RawHTML>{shortcode}</RawHTML>\r\n        ]);\r\n    },\r\n    save: ({ attributes }) => {       \r\n        var shortcode = [\r\n            '[wp-3dtvl model_id=\"' + attributes.model_id + '\"',\r\n            'model_file=\"' + attributes.model_url + '\"',\r\n            'model_preview=\"' + attributes.model_preview + '\"',\r\n            'rotation_x=\"' + attributes.rotation_x + '\"',\r\n            'rotation_y=\"' + attributes.rotation_y + '\"',\r\n            'rotation_z=\"' + attributes.rotation_z + '\"][/wp-3dtvl]'\r\n        ].join(' ');\r\n\r\n        return (<RawHTML>{shortcode}</RawHTML>);\r\n    },\r\n});"],"names":["registerBlockType","wp","blocks","RawHTML","userState","element","InspectorControls","MediaUpload","editor","PanelBody","Button","RangeControl","ToggleControl","components","title","icon","description","category","example","attributes","model_url","type","default","model_url_bck","model_id","model_id_bck","model_preview","rotation_x","rotation_y","rotation_z","link_cloaking","edit","setAttributes","ALLOWED_MEDIA_TYPES","shortcode","join","onRotationXChange","new_value","onRotationYChange","onRotationZChange","onSelectModel","new_media","url","id","onSelectPreview","sizes","full","onLinkCloakingSwitch","marginBottom","marginTop","open","save"],"sourceRoot":""}